"use strict";(self.webpackChunk_matano_website=self.webpackChunk_matano_website||[]).push([[2889],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>d});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=a.createContext({}),l=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=l(e.components);return a.createElement(c.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,c=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=l(n),d=o,f=p["".concat(c,".").concat(d)]||p[d]||m[d]||r;return n?a.createElement(f,s(s({ref:t},u),{},{components:n})):a.createElement(f,s({ref:t},u))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,s=new Array(r);s[0]=p;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var l=2;l<r;l++)s[l]=n[l];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},41042:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>m,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var a=n(87462),o=(n(67294),n(3905));const r={title:"Log source schema",sidebar_position:3},s=void 0,i={unversionedId:"log-sources/schema",id:"log-sources/schema",title:"Log source schema",description:"You define the shape of your log source's data by defining a schema.",source:"@site/docs/log-sources/schema.md",sourceDirName:"log-sources",slug:"/log-sources/schema",permalink:"/docs/log-sources/schema",draft:!1,editUrl:"https://github.com/matanolabs/matano/tree/main/website/docs/log-sources/schema.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Log source schema",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Ingestion",permalink:"/docs/log-sources/ingestion"},next:{title:"Querying tables",permalink:"/docs/tables/querying"}},c={},l=[{value:"Common schema",id:"common-schema",level:2},{value:"Using a Matano managed log source",id:"using-a-matano-managed-log-source",level:2},{value:"Defining a custom schema",id:"defining-a-custom-schema",level:2},{value:"Specifying ECS fields",id:"specifying-ecs-fields",level:2},{value:"Extending ECS with custom fields",id:"extending-ecs-with-custom-fields",level:2}],u={toc:l};function m(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"You define the shape of your log source's data by defining a ",(0,o.kt)("em",{parentName:"p"},"schema"),"."),(0,o.kt)("h2",{id:"common-schema"},"Common schema"),(0,o.kt)("p",null,"By default, a log source will use the ",(0,o.kt)("a",{parentName:"p",href:"https://www.elastic.co/guide/en/ecs/current/ecs-reference.html"},(0,o.kt)("strong",{parentName:"a"},"Elastic Common Schema (ECS)")),". ECS is a popular format that defines a common set of fields to be used when storing log data. "),(0,o.kt)("p",null,"Matano encourages you to normalize your log data to ECS, so you can best analyze, and correlate the data represented in your events."),(0,o.kt)("p",null,"Matano can ingest from sources that use already use ECS, like Beats processors, without requiring transformation. Otherwise, you can use a ",(0,o.kt)("a",{parentName:"p",href:"#"},"pre-built Matano transformation")," to normalize data from a supported source to ECS or write your ",(0,o.kt)("a",{parentName:"p",href:"#"},"own transformation")," to normalize log data."),(0,o.kt)("p",null,"Matano currently supports ECS version ",(0,o.kt)("strong",{parentName:"p"},"8.3.1"),"."),(0,o.kt)("h2",{id:"using-a-matano-managed-log-source"},"Using a Matano managed log source"),(0,o.kt)("p",null,"If your log source is supported by Matano, you should use a Matano managed log source. Matano will take care of specifying the schema for your log source."),(0,o.kt)("h2",{id:"defining-a-custom-schema"},"Defining a custom schema"),(0,o.kt)("p",null,"If you aren't using a Matano ",(0,o.kt)("a",{parentName:"p",href:"#"},"managed log source"),", you must provide the schema for your log source."),(0,o.kt)("h2",{id:"specifying-ecs-fields"},"Specifying ECS fields"),(0,o.kt)("p",null,"You can specify the subset of ECS fields to include in your schema by using the ",(0,o.kt)("inlineCode",{parentName:"p"},"ecs_field_names")," key in your ",(0,o.kt)("inlineCode",{parentName:"p"},"log_source.yml")," file."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yml"},'schema:\n  ecs_field_names: ["dns", "agent"]\n')),(0,o.kt)("h2",{id:"extending-ecs-with-custom-fields"},"Extending ECS with custom fields"),(0,o.kt)("p",null,"ECS is a permissive schema, that encourages you to add columns using custom field names for data that doesn't completely map to ECS. "),(0,o.kt)("p",null,"To add custom fields to ECS for a Matano log source, you can define the fields in your ",(0,o.kt)("inlineCode",{parentName:"p"},"log_source.yml")," configuration file:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yml"},'schema:\n  ecs_field_names: ["dns", "agent"]\n  fields:\n    - name: "my_additional_field"\n      type: "string"\n    - name: "additional_struct"\n      type:\n        type: "struct"\n        fields:\n          - name: "field_one"\n            type: "string"\n          - name: "field_two"\n            type: "int"\n')),(0,o.kt)("p",null,"These fields will be merged with ECS fields in the final log source schema."),(0,o.kt)("p",null,"The schema configuration follows the ",(0,o.kt)("a",{parentName:"p",href:"https://iceberg.apache.org/spec/#schemas"},"Apache Iceberg schema format")," in JSON/YAML format. See a ",(0,o.kt)("a",{parentName:"p",href:"https://iceberg.apache.org/spec/#schemas"},"complete specification here"),"."))}m.isMDXComponent=!0}}]);